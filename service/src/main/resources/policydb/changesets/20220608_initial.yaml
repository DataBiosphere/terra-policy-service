databaseChangeLog:
  - changeSet:
      id: initial
      author: dd
      changes:
        - createTable:
            tableName: policy_object
            columns:
              - column:
                  name: object_id
                  type: text
                  constraints:
                    primaryKey: true
                    nullable: false
                  remarks: This field must be a UUID. Components must have UUIDs for their policy-bearing objects.
              - column:
                  name: component
                  type: text
                  constraints:
                    nullable: false
                  remarks: Name of the component. See PaoComponent for details
              - column:
                  name: object_type
                  type: text
                  constraints:
                    nullable: false
                  remarks: Type of the component. See PaoObjectType for details
              - column:
                  name: children
                  type: text[]
                  constraints:
                    nullable: false
                  remarks: Array of child paos. There should always be an array, even if it is empty.
              - column:
                  name: in_conflict
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: attribute_set_id
                  type: text
                  remarks: Id the set of attribute of the object
              - column:
                  name: effective_set_id
                  type: text
                  remarks: Id of the effective set of attributes of the object

        - createTable:
            tableName: attribute_set
            columns:
              - column:
                  name: set_id
                  type: text
                  constraints:
                    nullable: false
                  remarks: unique id of the attribute set; generated by TPS; there is no PK
              - column:
                  name: namespace
                  type: text
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: text
                  constraints:
                    nullable: false
                  remarks: Although (namespace, name) match the PK of policy_attribute, they do not have to be present in that table
              - column:
                  name: properties
                  type: jsonb
                  remarks: JSON holding key-value pairs; both values are strings

        - createTable:
            tableName: policy_attribute
            columns:
              - column:
                  name: namespace
                  type: text
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: text
                  constraints:
                    nullable: false
              - column:
                  name: short_description
                  type: text
                  remarks: Intended to be concise for GUI display
              - column:
                  name: long_description
                  type: text
                  remarks: Complete description of the attribute
              - column:
                  name: required_properties
                  type: text[]
                  remarks: Required additional properties for the attribute
              - column:
                  name: optional_properties
                  type: text[]
                  remarks: Optional additional properties for the attribute

        - addPrimaryKey:
            columnNames: namespace, name
            tableName: policy_attribute
            constraintName: pk_policy_attribute

